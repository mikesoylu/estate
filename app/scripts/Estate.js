var Estate = new Backbone.Marionette.Application();Estate.addRegions({  agency: '#agency',  listings: '#listings'});Estate.addInitializer(function() {  new Router();  Backbone.history.start();});var Listing = Backbone.Model.extend();var Listings = Backbone.Collection.extend({  model: Listing,  urlRoot: 'http://api.emlakabc.com/2013-08-30/agencies',  url: function() {    return this.urlRoot + '/' + this.id + '/listings?page=' + this.page;  },  parse: function(res) {    return res.listings;  },  initialize: function(id, page) {    this.id = id;    this.page = page || 1;  }});var ListingView = Backbone.Marionette.ItemView.extend({  template: "#listing-template",  tagName: 'tr',});var ListingsView = Backbone.Marionette.CollectionView.extend({  tagName: "table",  id: "listings",  template: "#listings-template",  itemView: ListingView,});var Router = Backbone.Router.extend({  routes: {    ':id': 'getListings',    ':id/:page': 'getListings'  },  getListings: function(id, page) {    listings = new Listings(id, page);    listings.fetch({      success: function() {        listingsView = new ListingsView({          collection: listings        });        Estate.listings.show(listingsView);      },      error:function(e) {          alert(' Service request failure: ' + e);      }    });  }});