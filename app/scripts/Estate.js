var apiUrl = 'https://api.emlakabc.com/2013-08-30/agencies';var Estate = new Backbone.Marionette.Application();Estate.addRegions({  agency: '#agency',  listings: '#listings'});Estate.addInitializer(function() {  new Router();  Backbone.history.start();});var Agency = Backbone.Model.extend({  url: function() {    return apiUrl + '/' + this.id;  },  parse: function(res) {    console.log(res);    return res;  },  initialize: function(id) {    this.id = id;  }});var AgencyView = Backbone.Marionette.ItemView.extend({  template: '#agency-template'});var Listing = Backbone.Model.extend();var ListingCollection = Backbone.Collection.extend({  model: Listing,  url: function() {    return apiUrl + '/' + this.id + '/listings?page=' + this.page;  },  parse: function(res) {    return res.listings;  },  initialize: function(id, page) {    this.id = id;    this.page = page || 1;  }});var ListingView = Backbone.Marionette.ItemView.extend({  template: '#listing-template'});var ListingsView = Backbone.Marionette.CollectionView.extend({  itemView: ListingView});var Router = Backbone.Router.extend({  routes: {    ':id': 'getAgencyData',    ':id/:page': 'getAgencyData'  },  getAgencyData: function(id, page) {    var listings = new ListingCollection(id, page);    listings.fetch({      success: function() {        var listingsView = new ListingsView({          collection: listings        });        Estate.listings.show(listingsView);      }    });    var agency = new Agency(id);    agency.fetch({      success: function() {        var agencyView = new AgencyView({          model: agency        });        Estate.agency.show(agencyView);      }    });  }});